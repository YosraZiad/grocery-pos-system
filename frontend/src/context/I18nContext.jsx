import { createContext, useContext, useState, useEffect } from 'react';

// ترجمات
const translations = {
  en: {
    // Navigation
    home: 'Home',
    categories: 'Categories',
    products: 'Products',
    sales: 'Sales',
    inventory: 'Inventory',
    returns: 'Returns',
    logout: 'Logout',
    
    // Auth
    login: 'Login',
    register: 'Register',
    email: 'Email',
    password: 'Password',
    loginButton: 'Sign In',
    registerButton: 'Sign Up',
    name: 'Name',
    confirmPassword: 'Confirm Password',
    createAccount: 'Create new account',
    or: 'Or',
    testAccounts: 'Test Accounts',
    admin: 'Admin',
    cashier: 'Cashier',
    
    // Home
    welcome: 'Welcome to Store Management System',
    welcomeDesc: 'An integrated system for managing a grocery store with Point of Sale system and inventory management',
    productManagement: 'Product Management',
    productManagementDesc: 'Manage products, categories, and inventory',
    salesScreen: 'Sales Screen',
    salesScreenDesc: 'Point of Sale system for quick sales',
    reports: 'Reports',
    reportsDesc: 'Comprehensive reports on sales and profits',
    
    // Categories
    manageCategories: 'Manage Categories',
    addCategory: 'Add New Category',
    editCategory: 'Edit Category',
    categoryName: 'Name',
    description: 'Description',
    productsCount: 'Products Count',
    actions: 'Actions',
    edit: 'Edit',
    delete: 'Delete',
    cancel: 'Cancel',
    save: 'Save',
    update: 'Update',
    confirmDelete: 'Are you sure you want to delete this category?',
    
    // Products
    manageProducts: 'Manage Products',
    addProduct: 'Add New Product',
    editProduct: 'Edit Product',
    productName: 'Product Name',
    barcode: 'Barcode',
    purchasePrice: 'Purchase Price',
    salePrice: 'Sale Price',
    quantity: 'Quantity',
    status: 'Status',
    available: 'Available',
    lowStock: 'Low Stock',
    searchPlaceholder: 'Search by name or barcode...',
    allCategories: 'All Categories',
    
    // Sales
    salesScreenTitle: 'Sales Screen',
    cart: 'Shopping Cart',
    emptyCart: 'Cart is empty',
    subtotal: 'Subtotal',
    discount: 'Discount',
    total: 'Total',
    paymentMethod: 'Payment Method',
    cash: 'Cash',
    card: 'Card',
    transfer: 'Transfer',
    fixed: 'Fixed',
    percentage: 'Percentage',
    completeSale: 'Complete Sale',
    processing: 'Processing...',
    tips: 'Tips',
    tip1: 'Search by name or barcode to add product',
    tip2: 'You can modify quantity from cart',
    tip3: 'You can add discount before completing sale',
    
    // Common
    loading: 'Loading...',
    error: 'Error',
    success: 'Success',
    close: 'Close',
    copyright: '© 2024 Grocery POS System. All rights reserved.',
    noCategories: 'No categories yet',
    back: 'Back',
    print: 'Print',
    invoice: 'Invoice',
    
    // Inventory
    inventoryManagement: 'Inventory Management',
    manageAndMonitor: 'Manage and monitor your inventory',
    totalProducts: 'Total Products',
    expiringSoon: 'Expiring Soon',
    expired: 'Expired',
    outOfStock: 'Out of Stock',
    stockStatus: 'Stock Status',
    expiryStatus: 'Expiry Status',
    expiryDate: 'Expiry Date',
    allStockStatus: 'All Stock Status',
    allExpiryStatus: 'All Expiry Status',
    lowStockAlert: 'Low Stock Alert',
    expiringSoonAlert: 'Expiring Soon',
    stock: 'Stock',
    min: 'Min',
    expires: 'Expires',
    days: 'days',
    inventoryTransactionsHistory: 'Inventory Transactions History',
    date: 'Date',
    product: 'Product',
    type: 'Type',
    reference: 'Reference',
    notes: 'Notes',
    allTypes: 'All Types',
    allReferences: 'All References',
    fromDate: 'From Date',
    toDate: 'To Date',
    showing: 'Showing',
    to: 'to',
    of: 'of',
    transactions: 'transactions',
    todaySales: 'Today Sales',
    valid: 'Valid',
    noExpiry: 'No Expiry',
    in: 'In',
    out: 'Out',
    return: 'Return',
    sale: 'Sale',
    purchase: 'Purchase',
    quickAndEasy: 'Quick and easy point of sale system',
    fullName: 'Full Name',
    confirmPasswordPlaceholder: 'Confirm Password',
    noResultsFound: 'No results found',
    availableQuantity: 'Available quantity',
    saleCompletedSuccessfully: 'Sale completed successfully',
    errorCreatingSale: 'Error creating sale',
    passwordMin: 'Password (min 8 characters)',
    
    // Sales List & Details
    salesList: 'Sales List',
    viewAndManageSales: 'View and manage all sales',
    newSale: 'New Sale',
    searchByInvoiceNumber: 'Search by invoice number...',
    clearFilters: 'Clear Filters',
    invoiceNumber: 'Invoice Number',
    user: 'User',
    items: 'Items',
    noSalesFound: 'No sales found',
    viewInvoice: 'View Invoice',
    cancelSale: 'Cancel Sale',
    confirmCancelSale: 'Are you sure you want to cancel this sale? This will return items to inventory.',
    saleCancelledSuccessfully: 'Sale cancelled successfully',
    saleDetails: 'Sale Details',
    saleInformation: 'Sale Information',
    summary: 'Summary',
    price: 'Price',
    saleNotFound: 'Sale not found',
    completed: 'completed',
    cancelled: 'cancelled',
    results: 'results',
    previous: 'Previous',
    next: 'Next',
    
    // Confirmation Modal
    confirmAction: 'Confirm Action',
    areYouSure: 'Are you sure?',
    confirm: 'Confirm',
    confirmSale: 'Confirm Sale',
    confirmSaleMessage: 'Are you sure you want to complete this sale?',
    
    // Discount Modal
    addDiscount: 'Add Discount',
    discountType: 'Discount Type',
    discountPercentage: 'Discount Percentage',
    discountAmount: 'Discount Amount',
    removeDiscount: 'Remove Discount',
    apply: 'Apply',
    
    // Quantity Control
    decrease: 'Decrease',
    increase: 'Increase',
    viewDetails: 'View Details',
    
    // Returns
    returnsManagement: 'Returns Management',
    manageReturns: 'Manage customer and supplier returns',
    addReturn: 'Add Return',
    customerReturn: 'Customer Return',
    supplierReturn: 'Supplier Return',
    allStatuses: 'All Statuses',
    pending: 'Pending',
    approved: 'Approved',
    rejected: 'Rejected',
    amount: 'Amount',
    reason: 'Reason',
    selectInvoice: 'Select Invoice',
    selectProduct: 'Select Product',
    autoApprove: 'Auto Approve',
    add: 'Add',
    returnCreatedSuccessfully: 'Return created successfully',
    returnUpdatedSuccessfully: 'Return updated successfully',
    noReturnsFound: 'No returns found',
    approve: 'Approve',
    reject: 'Reject',
    confirmApprovedReturn: 'Are you sure you want to approve this return? This will update inventory.',
    confirmRejectedReturn: 'Are you sure you want to reject this return?',
    
    // Suppliers
    suppliersManagement: 'Suppliers Management',
    manageSuppliers: 'Manage suppliers and their information',
    addSupplier: 'Add Supplier',
    editSupplier: 'Edit Supplier',
    searchSuppliers: 'Search suppliers...',
    phone: 'Phone',
    address: 'Address',
    totalBalance: 'Total Balance',
    invoicesCount: 'Invoices Count',
    noSuppliersFound: 'No suppliers found',
    supplierCreatedSuccessfully: 'Supplier created successfully',
    supplierUpdatedSuccessfully: 'Supplier updated successfully',
    supplierDeletedSuccessfully: 'Supplier deleted successfully',
    errorCreatingSupplier: 'Error creating supplier',
    errorUpdatingSupplier: 'Error updating supplier',
    errorDeletingSupplier: 'Error deleting supplier',
    deletingSupplier: 'Deleting supplier...',
    confirmDeleteSupplier: 'Are you sure you want to delete this supplier?',
    
    // Purchase Invoices
    purchaseInvoices: 'Purchase Invoices',
    managePurchaseInvoices: 'Manage purchase invoices from suppliers',
    addPurchaseInvoice: 'Add Purchase Invoice',
    allSuppliers: 'All Suppliers',
    paid: 'Paid',
    unpaid: 'Unpaid',
    paidAmount: 'Paid Amount',
    balance: 'Balance',
    selectSupplier: 'Select Supplier',
    addItem: 'Add Item',
    noPurchaseInvoicesFound: 'No purchase invoices found',
    purchaseInvoiceCreatedSuccessfully: 'Purchase invoice created successfully',
    payInvoice: 'Pay Invoice',
    remainingBalance: 'Remaining Balance',
    paymentAmount: 'Payment Amount',
    pay: 'Pay',
    paymentProcessedSuccessfully: 'Payment processed successfully',
    amountMustBeGreaterThanZero: 'Amount must be greater than zero',
    amountCannotExceedBalance: 'Amount cannot exceed the remaining balance',
    
    // Expenses
    expensesManagement: 'Expenses Management',
    manageExpenses: 'Manage expenses and expense categories',
    addExpense: 'Add Expense',
    editExpense: 'Edit Expense',
    category: 'Category',
    selectCategory: 'Select Category',
    searchExpenses: 'Search expenses...',
    noExpensesFound: 'No expenses found',
    expenseCreatedSuccessfully: 'Expense created successfully',
    expenseUpdatedSuccessfully: 'Expense updated successfully',
    expenseDeletedSuccessfully: 'Expense deleted successfully',
    confirmDeleteExpense: 'Are you sure you want to delete this expense?',
    totalExpenses: 'Total Expenses',
    expensesCount: 'Expenses Count',
    averageExpense: 'Average Expense',
    showSummary: 'Show Summary',
    hideSummary: 'Hide Summary',
    expenses: 'expenses',
    categoryCreatedSuccessfully: 'Category created successfully',
    categoryUpdatedSuccessfully: 'Category updated successfully',
    errorCreatingCategory: 'Error creating category',
    errorUpdatingCategory: 'Error updating category',
    errorDeletingCategory: 'Error deleting category',
    deletingCategory: 'Deleting category...',
    
    // Products
    productCreatedSuccessfully: 'Product created successfully',
    productUpdatedSuccessfully: 'Product updated successfully',
    productDeletedSuccessfully: 'Product deleted successfully',
    errorCreatingProduct: 'Error creating product',
    errorUpdatingProduct: 'Error updating product',
    errorDeletingProduct: 'Error deleting product',
    confirmDeleteProduct: 'Are you sure you want to delete this product?',
    deletingProduct: 'Deleting product...',
    
    // Profit & Loss
    profitLoss: 'Profit & Loss',
    profitLossDescription: 'Calculate profits and losses On-The-Fly from sales, expenses, and returns',
    totalSales: 'Total Sales',
    costOfGoods: 'Cost of Goods',
    grossProfit: 'Gross Profit',
    netProfit: 'Net Profit',
    details: 'Details',
    daily: 'Daily',
    monthly: 'Monthly',
    byProduct: 'By Product',
    byCategory: 'By Category',
    month: 'Month',
    year: 'Year',
    quantitySold: 'Quantity Sold',
    productsSold: 'Products Sold',
    
    // Reports
    reportsDescription: 'Comprehensive reports on sales, products, and losses',
    bestSellingProducts: 'Best Selling Products',
    worstSellingProducts: 'Worst Selling Products',
    salesByTime: 'Sales By Time',
    expiredLosses: 'Expired Losses',
    period: 'Period',
    noDataFound: 'No data found',
    totalLoss: 'Total Loss',
    expiredProductsCount: 'Expired Products Count',
    expiredProducts: 'Expired Products',
    daysExpired: 'Days Expired',
    loss: 'Loss',
    hour: 'Hour',
    hourlySales: 'Hourly Sales',
    averageSale: 'Average Sale',
    inventoryReports: 'Inventory Reports',
    financialReports: 'Financial Reports',
    exportPDF: 'Export PDF',
    exportError: 'Error exporting PDF',
    inventoryDetails: 'Inventory Details',
    totalInventoryValue: 'Total Inventory Value',
    inventoryIn: 'Inventory In',
    inventoryOut: 'Inventory Out',
    netInventoryChange: 'Net Inventory Change',
    financialDetails: 'Financial Details',
    salesByPaymentMethod: 'Sales By Payment Method',
    
    // Settings
    settings: 'Settings',
    manageSystemSettings: 'Manage system settings and preferences',
    storeSettings: 'Store Settings',
    printerSettings: 'Printer Settings',
    storeInformation: 'Store Information',
    storeName: 'Store Name',
    storeAddress: 'Store Address',
    storePhone: 'Store Phone',
    storeEmail: 'Store Email',
    storeLogo: 'Store Logo',
    uploadLogo: 'Upload Logo',
    upload: 'Upload',
    uploading: 'Uploading...',
    currencySettings: 'Currency Settings',
    currency: 'Currency',
    currencySymbol: 'Currency Symbol',
    receiptSettings: 'Receipt Settings',
    receiptFooter: 'Receipt Footer',
    receiptFooterPlaceholder: 'Text to display at the bottom of receipts',
    printerName: 'Printer Name',
    printerNamePlaceholder: 'Enter printer name',
    printerType: 'Printer Type',
    thermalPrinter: 'Thermal Printer',
    inkjetPrinter: 'Inkjet Printer',
    laserPrinter: 'Laser Printer',
    printerSettingsNote: 'Note: Printer settings are used for receipt printing. Make sure your printer is properly configured.',
    settingsUpdatedSuccessfully: 'Settings updated successfully',
    logoUploadedSuccessfully: 'Logo uploaded successfully',
    
    // Dashboard
    dashboard: 'Dashboard',
    dashboardDesc: 'Overview of your store performance',
    today: 'Today',
    week: 'This Week',
    units: 'Units',
    alerts: 'Alerts',
    pendingReturns: 'Pending Returns',
    quickActions: 'Quick Actions',
    dailySales: 'Daily Sales',
    last7Days: 'Last 7 Days',
    topProducts: 'Top Products',
    paymentMethods: 'Payment Methods',
    
    // Backup
    backupManagement: 'Backup Management',
    createBackup: 'Create Backup',
    backupList: 'Backup List',
    creating: 'Creating...',
    restore: 'Restore',
    download: 'Download',
    confirmCreateBackup: 'Are you sure you want to create a backup?',
    confirmRestoreBackup: 'Are you sure you want to restore this backup? This will replace all current data.',
    confirmDeleteBackup: 'Are you sure you want to delete this backup?',
    backupCreatedSuccessfully: 'Backup created successfully',
    backupRestoredSuccessfully: 'Backup restored successfully',
    backupDeletedSuccessfully: 'Backup deleted successfully',
    noBackupsFound: 'No backups found',
    
    // Categories
    categoryDeletedSuccessfully: 'Category deleted successfully',
    cannotDeleteCategoryWithProducts: 'Cannot delete category with existing products',
    confirmDeleteCategory: 'Are you sure you want to delete this category?',
    
    // Monthly Comparison
    monthlyComparison: 'Monthly Comparison',
    month1: 'Month 1',
    month2: 'Month 2',
    comparison: 'Comparison',
    
    // Admin Dashboard
    adminDashboard: 'Admin Dashboard',
    adminDashboardDesc: 'Manage users, roles, permissions, and system settings',
    cashierDashboard: 'Cashier Dashboard',
    cashierDashboardDesc: 'Quick access to sales and daily operations',
    usersManagement: 'Users Management',
    rolesAndPermissions: 'Roles & Permissions',
    manageUsers: 'Manage Users',
    manageRoles: 'Manage Roles',
    systemSettings: 'System Settings',
    viewReports: 'View Reports',
    
    // Users Management
    addUser: 'Add User',
    editUser: 'Edit User',
    searchUsers: 'Search users...',
    noUsersFound: 'No users found',
    userCreatedSuccessfully: 'User created successfully',
    userUpdatedSuccessfully: 'User updated successfully',
    userDeletedSuccessfully: 'User deleted successfully',
    errorCreatingUser: 'Error creating user',
    errorUpdatingUser: 'Error updating user',
    errorDeletingUser: 'Error deleting user',
    deletingUser: 'Deleting user...',
    confirmDeleteUser: 'Are you sure you want to delete this user?',
    leaveEmptyToKeepCurrent: 'Leave empty to keep current',
    roleName: 'Role Name',
    manageUsersAndRoles: 'Manage users and their roles',
    
    // Roles Management
    addRole: 'Add Role',
    editRole: 'Edit Role',
    roleCreatedSuccessfully: 'Role created successfully',
    roleUpdatedSuccessfully: 'Role updated successfully',
    roleDeletedSuccessfully: 'Role deleted successfully',
    errorCreatingRole: 'Error creating role',
    errorUpdatingRole: 'Error updating role',
    errorDeletingRole: 'Error deleting role',
    deletingRole: 'Deleting role...',
    confirmDeleteRole: 'Are you sure you want to delete this role?',
    manageRolesAndPermissions: 'Manage roles and their permissions',
    more: 'more',
    createdAt: 'Created At',
    noRolesFound: 'No roles found',
    createFirstRole: 'Create your first role to get started',
    systemRole: 'System Role',
    usersCount: 'Users Count',
    noPermissions: 'No permissions',
    availablePermissions: 'Available Permissions',
    permissions: 'Permissions',
    users: 'users',
    errorLoadingRoles: 'Error loading roles',
    errorLoadingPermissions: 'Error loading permissions',
    errorLoadingData: 'Error loading data',
    retry: 'Retry',
    noPermissionsFound: 'No permissions found',
    permissionsWillAppearHere: 'Permissions will appear here once they are loaded',
    totalPermissions: 'Total',
    viewAll: 'View All',
    
    // Profile
    profile: 'Profile',
    manageYourProfile: 'Manage your profile information and password',
    profileInformation: 'Profile Information',
    changePassword: 'Change Password',
    currentPassword: 'Current Password',
    newPassword: 'New Password',
    updatePassword: 'Update Password',
    profileUpdatedSuccessfully: 'Profile updated successfully',
    passwordUpdatedSuccessfully: 'Password updated successfully',
    errorUpdatingProfile: 'Error updating profile',
    errorUpdatingPassword: 'Error updating password',
    passwordsDoNotMatch: 'Passwords do not match',
    memberSince: 'Member since',
  },
  ar: {
    // Navigation
    home: 'الرئيسية',
    categories: 'الأقسام',
    products: 'المنتجات',
    sales: 'المبيعات',
    inventory: 'المخزون',
    returns: 'المرتجعات',
    logout: 'تسجيل الخروج',
    
    // Auth
    login: 'تسجيل الدخول',
    register: 'إنشاء حساب',
    email: 'البريد الإلكتروني',
    password: 'كلمة المرور',
    loginButton: 'تسجيل الدخول',
    registerButton: 'إنشاء حساب',
    name: 'الاسم',
    confirmPassword: 'تأكيد كلمة المرور',
    createAccount: 'إنشاء حساب جديد',
    or: 'أو',
    testAccounts: 'حسابات تجريبية',
    admin: 'مدير',
    cashier: 'كاشير',
    
    // Home
    welcome: 'مرحباً بك في نظام إدارة المتجر',
    welcomeDesc: 'نظام متكامل لإدارة متجر المواد الغذائية مع نظام نقاط البيع وإدارة المخزون',
    productManagement: 'إدارة المنتجات',
    productManagementDesc: 'إدارة المنتجات والأقسام والمخزون',
    salesScreen: 'شاشة المبيعات',
    salesScreenDesc: 'نظام نقاط البيع للبيع السريع',
    reports: 'التقارير',
    reportsDesc: 'تقارير شاملة عن المبيعات والأرباح',
    
    // Categories
    manageCategories: 'إدارة الأقسام',
    addCategory: 'إضافة قسم جديد',
    editCategory: 'تعديل قسم',
    categoryName: 'الاسم',
    description: 'الوصف',
    productsCount: 'عدد المنتجات',
    actions: 'الإجراءات',
    edit: 'تعديل',
    delete: 'حذف',
    cancel: 'إلغاء',
    save: 'حفظ',
    update: 'تحديث',
    confirmDelete: 'هل أنت متأكد من حذف هذا القسم؟',
    
    // Products
    manageProducts: 'إدارة المنتجات',
    addProduct: 'إضافة منتج جديد',
    editProduct: 'تعديل منتج',
    productName: 'اسم المنتج',
    barcode: 'الباركود',
    purchasePrice: 'سعر الشراء',
    salePrice: 'سعر البيع',
    quantity: 'الكمية',
    status: 'الحالة',
    available: 'متوفر',
    lowStock: 'منخفض',
    searchPlaceholder: 'بحث بالاسم أو الباركود...',
    allCategories: 'جميع الأقسام',
    
    // Sales
    salesScreenTitle: 'شاشة المبيعات',
    cart: 'سلة المشتريات',
    emptyCart: 'السلة فارغة',
    subtotal: 'الإجمالي الفرعي',
    discount: 'الخصم',
    total: 'الإجمالي',
    paymentMethod: 'طريقة الدفع',
    cash: 'نقدي',
    card: 'بطاقة',
    transfer: 'تحويل',
    fixed: 'قيمة ثابتة',
    percentage: 'نسبة مئوية',
    completeSale: 'إتمام البيع',
    processing: 'جاري المعالجة...',
    tips: 'نصائح',
    tip1: '• ابحث بالاسم أو الباركود لإضافة منتج',
    tip2: '• يمكنك تعديل الكمية من السلة',
    tip3: '• يمكنك إضافة خصم قبل إتمام البيع',
    
    // Common
    loading: 'جاري التحميل...',
    error: 'خطأ',
    success: 'نجح',
    close: 'إغلاق',
    copyright: '© 2024 Grocery POS System. جميع الحقوق محفوظة.',
    noCategories: 'لا توجد أقسام بعد',
    back: 'رجوع',
    print: 'طباعة',
    invoice: 'فاتورة',
    
    // Inventory
    inventoryManagement: 'إدارة المخزون',
    manageAndMonitor: 'إدارة ومراقبة المخزون',
    totalProducts: 'إجمالي المنتجات',
    expiringSoon: 'قريب الانتهاء',
    expired: 'منتهي الصلاحية',
    outOfStock: 'نفد المخزون',
    stockStatus: 'حالة المخزون',
    expiryStatus: 'حالة الصلاحية',
    expiryDate: 'تاريخ الانتهاء',
    allStockStatus: 'جميع حالات المخزون',
    allExpiryStatus: 'جميع حالات الصلاحية',
    lowStockAlert: 'تنبيه المخزون المنخفض',
    expiringSoonAlert: 'تنبيه قرب الانتهاء',
    stock: 'المخزون',
    min: 'الحد الأدنى',
    expires: 'ينتهي',
    days: 'أيام',
    inventoryTransactionsHistory: 'سجل حركة المخزون',
    date: 'التاريخ',
    product: 'المنتج',
    type: 'النوع',
    reference: 'المرجع',
    notes: 'ملاحظات',
    allTypes: 'جميع الأنواع',
    allReferences: 'جميع المراجع',
    fromDate: 'من تاريخ',
    toDate: 'إلى تاريخ',
    showing: 'عرض',
    to: 'إلى',
    of: 'من',
    transactions: 'عملية',
    todaySales: 'مبيعات اليوم',
    valid: 'صالح',
    noExpiry: 'بدون صلاحية',
    in: 'داخل',
    out: 'خارج',
    return: 'إرجاع',
    sale: 'بيع',
    purchase: 'شراء',
    quickAndEasy: 'نظام نقاط بيع سريع وسهل',
    fullName: 'الاسم الكامل',
    confirmPasswordPlaceholder: 'تأكيد كلمة المرور',
    noResultsFound: 'لا توجد نتائج',
    availableQuantity: 'الكمية المتاحة',
    saleCompletedSuccessfully: 'تم إتمام البيع بنجاح',
    errorCreatingSale: 'خطأ في إنشاء البيع',
    passwordMin: 'كلمة المرور (8 أحرف على الأقل)',
    
    // Sales List & Details
    salesList: 'قائمة المبيعات',
    viewAndManageSales: 'عرض وإدارة جميع المبيعات',
    newSale: 'بيع جديد',
    searchByInvoiceNumber: 'بحث برقم الفاتورة...',
    clearFilters: 'مسح الفلاتر',
    invoiceNumber: 'رقم الفاتورة',
    user: 'المستخدم',
    items: 'عناصر',
    noSalesFound: 'لا توجد مبيعات',
    viewInvoice: 'عرض الفاتورة',
    cancelSale: 'إلغاء البيع',
    confirmCancelSale: 'هل أنت متأكد من إلغاء هذا البيع؟ سيتم إرجاع العناصر للمخزون.',
    saleCancelledSuccessfully: 'تم إلغاء البيع بنجاح',
    saleDetails: 'تفاصيل البيع',
    saleInformation: 'معلومات البيع',
    summary: 'الملخص',
    price: 'السعر',
    saleNotFound: 'البيع غير موجود',
    completed: 'مكتمل',
    cancelled: 'ملغي',
    results: 'نتيجة',
    previous: 'السابق',
    next: 'التالي',
    
    // Confirmation Modal
    confirmAction: 'تأكيد الإجراء',
    areYouSure: 'هل أنت متأكد؟',
    confirm: 'تأكيد',
    confirmSale: 'تأكيد البيع',
    confirmSaleMessage: 'هل أنت متأكد من إتمام هذا البيع؟',
    
    // Discount Modal
    addDiscount: 'إضافة خصم',
    discountType: 'نوع الخصم',
    discountPercentage: 'نسبة الخصم',
    discountAmount: 'قيمة الخصم',
    removeDiscount: 'إزالة الخصم',
    apply: 'تطبيق',
    
    // Quantity Control
    decrease: 'تقليل',
    increase: 'زيادة',
    viewDetails: 'عرض التفاصيل',
    
    // Returns
    returnsManagement: 'إدارة المرتجعات',
    manageReturns: 'إدارة مرتجعات العملاء والموردين',
    addReturn: 'إضافة مرتجع',
    customerReturn: 'إرجاع من زبون',
    supplierReturn: 'إرجاع لمورّد',
    allStatuses: 'جميع الحالات',
    pending: 'قيد الانتظار',
    approved: 'معتمد',
    rejected: 'مرفوض',
    amount: 'المبلغ',
    reason: 'السبب',
    selectInvoice: 'اختر الفاتورة',
    selectProduct: 'اختر المنتج',
    autoApprove: 'موافقة تلقائية',
    add: 'إضافة',
    returnCreatedSuccessfully: 'تم إنشاء المرتجع بنجاح',
    returnUpdatedSuccessfully: 'تم تحديث المرتجع بنجاح',
    noReturnsFound: 'لا توجد مرتجعات',
    approve: 'موافقة',
    reject: 'رفض',
    confirmApprovedReturn: 'هل أنت متأكد من الموافقة على هذا المرتجع؟ سيتم تحديث المخزون.',
    confirmRejectedReturn: 'هل أنت متأكد من رفض هذا المرتجع؟',
    
    // Suppliers
    suppliersManagement: 'إدارة الموردين',
    manageSuppliers: 'إدارة الموردين ومعلوماتهم',
    addSupplier: 'إضافة مورد',
    editSupplier: 'تعديل مورد',
    searchSuppliers: 'بحث عن موردين...',
    phone: 'الهاتف',
    address: 'العنوان',
    totalBalance: 'إجمالي الديون',
    invoicesCount: 'عدد الفواتير',
    noSuppliersFound: 'لا توجد موردين',
    supplierCreatedSuccessfully: 'تم إنشاء المورد بنجاح',
    supplierUpdatedSuccessfully: 'تم تحديث المورد بنجاح',
    supplierDeletedSuccessfully: 'تم حذف المورد بنجاح',
    errorCreatingSupplier: 'خطأ في إنشاء المورد',
    errorUpdatingSupplier: 'خطأ في تحديث المورد',
    errorDeletingSupplier: 'خطأ في حذف المورد',
    deletingSupplier: 'جاري حذف المورد...',
    confirmDeleteSupplier: 'هل أنت متأكد من حذف هذا المورد؟',
    
    // Purchase Invoices
    purchaseInvoices: 'فواتير الشراء',
    managePurchaseInvoices: 'إدارة فواتير الشراء من الموردين',
    addPurchaseInvoice: 'إضافة فاتورة شراء',
    allSuppliers: 'جميع الموردين',
    paid: 'مدفوع',
    unpaid: 'غير مدفوع',
    paidAmount: 'المبلغ المدفوع',
    balance: 'المتبقي',
    selectSupplier: 'اختر المورد',
    addItem: 'إضافة عنصر',
    noPurchaseInvoicesFound: 'لا توجد فواتير شراء',
    purchaseInvoiceCreatedSuccessfully: 'تم إنشاء فاتورة الشراء بنجاح',
    payInvoice: 'دفع الفاتورة',
    remainingBalance: 'المتبقي',
    paymentAmount: 'مبلغ الدفع',
    pay: 'دفع',
    paymentProcessedSuccessfully: 'تم معالجة الدفع بنجاح',
    amountMustBeGreaterThanZero: 'يجب أن يكون المبلغ أكبر من الصفر',
    amountCannotExceedBalance: 'لا يمكن أن يتجاوز المبلغ المتبقي',
    
    // Expenses
    expensesManagement: 'إدارة المصروفات',
    manageExpenses: 'إدارة المصروفات وأقسام المصروفات',
    addExpense: 'إضافة مصروف',
    editExpense: 'تعديل مصروف',
    category: 'القسم',
    selectCategory: 'اختر القسم',
    searchExpenses: 'بحث عن مصروفات...',
    noExpensesFound: 'لا توجد مصروفات',
    expenseCreatedSuccessfully: 'تم إنشاء المصروف بنجاح',
    expenseUpdatedSuccessfully: 'تم تحديث المصروف بنجاح',
    expenseDeletedSuccessfully: 'تم حذف المصروف بنجاح',
    confirmDeleteExpense: 'هل أنت متأكد من حذف هذا المصروف؟',
    totalExpenses: 'إجمالي المصروفات',
    expensesCount: 'عدد المصروفات',
    averageExpense: 'متوسط المصروف',
    showSummary: 'عرض الملخص',
    hideSummary: 'إخفاء الملخص',
    expenses: 'مصروفات',
    categoryCreatedSuccessfully: 'تم إنشاء القسم بنجاح',
    categoryUpdatedSuccessfully: 'تم تحديث القسم بنجاح',
    errorCreatingCategory: 'خطأ في إنشاء القسم',
    errorUpdatingCategory: 'خطأ في تحديث القسم',
    errorDeletingCategory: 'خطأ في حذف القسم',
    deletingCategory: 'جاري حذف القسم...',
    
    // Products
    productCreatedSuccessfully: 'تم إنشاء المنتج بنجاح',
    productUpdatedSuccessfully: 'تم تحديث المنتج بنجاح',
    productDeletedSuccessfully: 'تم حذف المنتج بنجاح',
    errorCreatingProduct: 'خطأ في إنشاء المنتج',
    errorUpdatingProduct: 'خطأ في تحديث المنتج',
    errorDeletingProduct: 'خطأ في حذف المنتج',
    confirmDeleteProduct: 'هل أنت متأكد من حذف هذا المنتج؟',
    deletingProduct: 'جاري حذف المنتج...',
    
    // Profit & Loss
    profitLoss: 'الأرباح والخسائر',
    profitLossDescription: 'حساب الأرباح والخسائر مباشرة من المبيعات والمصروفات والمرتجعات',
    totalSales: 'إجمالي المبيعات',
    costOfGoods: 'تكلفة البضاعة',
    grossProfit: 'الربح الإجمالي',
    netProfit: 'الربح الصافي',
    details: 'التفاصيل',
    daily: 'يومي',
    monthly: 'شهري',
    byProduct: 'حسب منتج',
    byCategory: 'حسب قسم',
    month: 'الشهر',
    year: 'السنة',
    quantitySold: 'الكمية المباعة',
    productsSold: 'المنتجات المباعة',
    
    // Reports
    reportsDescription: 'تقارير شاملة عن المبيعات والمنتجات والخسائر',
    bestSellingProducts: 'أفضل المنتجات مبيعًا',
    worstSellingProducts: 'المنتجات الضعيفة',
    salesByTime: 'مبيعات حسب الوقت',
    expiredLosses: 'خسائر الصلاحية',
    period: 'الفترة',
    noDataFound: 'لا توجد بيانات',
    totalLoss: 'إجمالي الخسائر',
    expiredProductsCount: 'عدد المنتجات المنتهية',
    expiredProducts: 'المنتجات المنتهية',
    daysExpired: 'أيام منتهية',
    loss: 'الخسارة',
    hour: 'الساعة',
    hourlySales: 'مبيعات حسب الساعة',
    averageSale: 'متوسط البيع',
    inventoryReports: 'تقارير المخزون',
    financialReports: 'تقارير مالية',
    exportPDF: 'تصدير PDF',
    exportError: 'خطأ في تصدير PDF',
    inventoryDetails: 'تفاصيل المخزون',
    totalInventoryValue: 'القيمة الإجمالية للمخزون',
    inventoryIn: 'داخل المخزون',
    inventoryOut: 'خارج المخزون',
    netInventoryChange: 'صافي التغيير',
    financialDetails: 'تفاصيل مالية',
    salesByPaymentMethod: 'المبيعات حسب طريقة الدفع',
    
    // Settings
    settings: 'الإعدادات',
    manageSystemSettings: 'إدارة إعدادات النظام والتفضيلات',
    storeSettings: 'إعدادات المتجر',
    printerSettings: 'إعدادات الطابعة',
    storeInformation: 'معلومات المتجر',
    storeName: 'اسم المتجر',
    storeAddress: 'عنوان المتجر',
    storePhone: 'هاتف المتجر',
    storeEmail: 'بريد المتجر',
    storeLogo: 'شعار المتجر',
    uploadLogo: 'رفع الشعار',
    upload: 'رفع',
    uploading: 'جاري الرفع...',
    currencySettings: 'إعدادات العملة',
    currency: 'العملة',
    currencySymbol: 'رمز العملة',
    receiptSettings: 'إعدادات الفاتورة',
    receiptFooter: 'تذييل الفاتورة',
    receiptFooterPlaceholder: 'نص يظهر في أسفل الفواتير',
    printerName: 'اسم الطابعة',
    printerNamePlaceholder: 'أدخل اسم الطابعة',
    printerType: 'نوع الطابعة',
    thermalPrinter: 'طابعة حرارية',
    inkjetPrinter: 'طابعة نافثة للحبر',
    laserPrinter: 'طابعة ليزر',
    printerSettingsNote: 'ملاحظة: إعدادات الطابعة تستخدم لطباعة الفواتير. تأكد من إعداد الطابعة بشكل صحيح.',
    settingsUpdatedSuccessfully: 'تم تحديث الإعدادات بنجاح',
    logoUploadedSuccessfully: 'تم رفع الشعار بنجاح',
    
    // Dashboard
    dashboard: 'لوحة التحكم',
    dashboardDesc: 'نظرة عامة على أداء متجرك',
    today: 'اليوم',
    week: 'هذا الأسبوع',
    units: 'وحدة',
    alerts: 'تنبيهات',
    pendingReturns: 'مرتجعات معلقة',
    quickActions: 'إجراءات سريعة',
    dailySales: 'المبيعات اليومية',
    last7Days: 'آخر 7 أيام',
    topProducts: 'أفضل المنتجات',
    paymentMethods: 'طرق الدفع',
    
    // Backup
    backupManagement: 'إدارة النسخ الاحتياطي',
    createBackup: 'إنشاء نسخة احتياطية',
    backupList: 'قائمة النسخ الاحتياطية',
    creating: 'جاري الإنشاء...',
    restore: 'استرجاع',
    download: 'تحميل',
    confirmCreateBackup: 'هل أنت متأكد من إنشاء نسخة احتياطية؟',
    confirmRestoreBackup: 'هل أنت متأكد من استرجاع هذه النسخة؟ سيتم استبدال جميع البيانات الحالية.',
    confirmDeleteBackup: 'هل أنت متأكد من حذف هذه النسخة؟',
    backupCreatedSuccessfully: 'تم إنشاء النسخة الاحتياطية بنجاح',
    backupRestoredSuccessfully: 'تم استرجاع النسخة الاحتياطية بنجاح',
    backupDeletedSuccessfully: 'تم حذف النسخة الاحتياطية بنجاح',
    noBackupsFound: 'لا توجد نسخ احتياطية',
    
    // Navigation
    management: 'الإدارة',
    
    // Monthly Comparison
    monthlyComparison: 'مقارنة شهرية',
    month1: 'الشهر الأول',
    month2: 'الشهر الثاني',
    comparison: 'المقارنة',
    
    // Admin Dashboard
    adminDashboard: 'لوحة تحكم المدير',
    adminDashboardDesc: 'إدارة المستخدمين والرول والصلاحيات وإعدادات النظام',
    cashierDashboard: 'لوحة تحكم الكاشير',
    cashierDashboardDesc: 'وصول سريع للمبيعات والعمليات اليومية',
    usersManagement: 'إدارة المستخدمين',
    rolesAndPermissions: 'الرول والصلاحيات',
    manageUsers: 'إدارة المستخدمين',
    manageRoles: 'إدارة الرول',
    systemSettings: 'إعدادات النظام',
    viewReports: 'عرض التقارير',
    
    // Users Management
    addUser: 'إضافة مستخدم',
    editUser: 'تعديل مستخدم',
    searchUsers: 'البحث عن المستخدمين...',
    noUsersFound: 'لا يوجد مستخدمين',
    userCreatedSuccessfully: 'تم إنشاء المستخدم بنجاح',
    userUpdatedSuccessfully: 'تم تحديث المستخدم بنجاح',
    userDeletedSuccessfully: 'تم حذف المستخدم بنجاح',
    errorCreatingUser: 'خطأ في إنشاء المستخدم',
    errorUpdatingUser: 'خطأ في تحديث المستخدم',
    errorDeletingUser: 'خطأ في حذف المستخدم',
    deletingUser: 'جاري حذف المستخدم...',
    confirmDeleteUser: 'هل أنت متأكد من حذف هذا المستخدم؟',
    leaveEmptyToKeepCurrent: 'اتركه فارغاً للاحتفاظ بالحالي',
    roleName: 'اسم الرول',
    manageUsersAndRoles: 'إدارة المستخدمين ورولهم',
    
    // Roles Management
    addRole: 'إضافة رول',
    editRole: 'تعديل رول',
    roleCreatedSuccessfully: 'تم إنشاء الرول بنجاح',
    roleUpdatedSuccessfully: 'تم تحديث الرول بنجاح',
    roleDeletedSuccessfully: 'تم حذف الرول بنجاح',
    errorCreatingRole: 'خطأ في إنشاء الرول',
    errorUpdatingRole: 'خطأ في تحديث الرول',
    errorDeletingRole: 'خطأ في حذف الرول',
    deletingRole: 'جاري حذف الرول...',
    confirmDeleteRole: 'هل أنت متأكد من حذف هذا الرول؟',
    manageRolesAndPermissions: 'إدارة الرول وصلاحياتهم',
    more: 'المزيد',
    createdAt: 'تاريخ الإنشاء',
    noRolesFound: 'لا توجد رول',
    createFirstRole: 'أنشئ أول رول للبدء',
    systemRole: 'رول النظام',
    usersCount: 'عدد المستخدمين',
    noPermissions: 'لا توجد صلاحيات',
    availablePermissions: 'الصلاحيات المتاحة',
    permissions: 'الصلاحيات',
    users: 'مستخدمين',
    errorLoadingRoles: 'خطأ في تحميل الرول',
    errorLoadingPermissions: 'خطأ في تحميل الصلاحيات',
    errorLoadingData: 'خطأ في تحميل البيانات',
    retry: 'إعادة المحاولة',
    noPermissionsFound: 'لا توجد صلاحيات',
    permissionsWillAppearHere: 'ستظهر الصلاحيات هنا بمجرد تحميلها',
    totalPermissions: 'الإجمالي',
    viewAll: 'عرض الكل',
    noPermissionToViewRoles: 'ليس لديك صلاحية لعرض الرول. يرجى الاتصال بالمدير.',
    noPermissionToViewPermissions: 'ليس لديك صلاحية لعرض الصلاحيات. يرجى الاتصال بالمدير.',
    
    // Profile
    profile: 'الملف الشخصي',
    manageYourProfile: 'إدارة معلومات ملفك الشخصي وكلمة المرور',
    profileInformation: 'معلومات الملف الشخصي',
    changePassword: 'تغيير كلمة المرور',
    currentPassword: 'كلمة المرور الحالية',
    newPassword: 'كلمة المرور الجديدة',
    updatePassword: 'تحديث كلمة المرور',
    profileUpdatedSuccessfully: 'تم تحديث الملف الشخصي بنجاح',
    passwordUpdatedSuccessfully: 'تم تحديث كلمة المرور بنجاح',
    errorUpdatingProfile: 'خطأ في تحديث الملف الشخصي',
    errorUpdatingPassword: 'خطأ في تحديث كلمة المرور',
    passwordsDoNotMatch: 'كلمات المرور غير متطابقة',
    memberSince: 'عضو منذ',
  },
};

const I18nContext = createContext();

export function I18nProvider({ children }) {
  const [language, setLanguage] = useState(() => {
    return localStorage.getItem('language') || 'en';
  });

  useEffect(() => {
    localStorage.setItem('language', language);
    document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';
    document.documentElement.lang = language;
  }, [language]);

  const t = (key) => {
    return translations[language]?.[key] || key;
  };

  const toggleLanguage = () => {
    setLanguage((prev) => (prev === 'en' ? 'ar' : 'en'));
  };

  return (
    <I18nContext.Provider value={{ language, setLanguage, toggleLanguage, t }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  const context = useContext(I18nContext);
  if (!context) {
    throw new Error('useI18n must be used within I18nProvider');
  }
  return context;
}
